\hypertarget{state__machine_8cpp}{}\doxysection{src/state\+\_\+machine.cpp File Reference}
\label{state__machine_8cpp}\index{src/state\_machine.cpp@{src/state\_machine.cpp}}


User interface server and F\+SM.  


{\ttfamily \#include \char`\"{}ros/ros.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}rt2\+\_\+assignment1/\+Command.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}rt2\+\_\+assignment1/\+Position.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}rt2\+\_\+assignment1/\+Random\+Position.\+h\char`\"{}}\newline
{\ttfamily \#include $<$actionlib/client/simple\+\_\+action\+\_\+client.\+h$>$}\newline
{\ttfamily \#include $<$actionlib/client/terminal\+\_\+state.\+h$>$}\newline
{\ttfamily \#include $<$rt2\+\_\+assignment1/\+Planning\+Action.\+h$>$}\newline
Include dependency graph for state\+\_\+machine.\+cpp\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{state__machine_8cpp__incl}
\end{center}
\end{figure}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{state__machine_8cpp_a1a9543636935547580c0657f4c7c0c2b}{user\+\_\+interface}} (rt2\+\_\+assignment1\+::\+Command\+::\+Request \&req, rt2\+\_\+assignment1\+::\+Command\+::\+Response \&res)
\item 
int \mbox{\hyperlink{state__machine_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}{main}} (int argc, char $\ast$$\ast$argv)
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{state__machine_8cpp_ab376b87f96a574a793c03c53e75afec8}\label{state__machine_8cpp_ab376b87f96a574a793c03c53e75afec8}} 
bool {\bfseries start} = false
\item 
\mbox{\Hypertarget{state__machine_8cpp_af287bc8596383f162b2b900a54c7ee4a}\label{state__machine_8cpp_af287bc8596383f162b2b900a54c7ee4a}} 
bool {\bfseries cancel} = false
\item 
\mbox{\Hypertarget{state__machine_8cpp_a5f2ab6294302eb439b05f176f0f85400}\label{state__machine_8cpp_a5f2ab6294302eb439b05f176f0f85400}} 
bool {\bfseries goal\+Running} = false
\item 
\mbox{\Hypertarget{state__machine_8cpp_a5734a27c6f335279bf9b0b57ae9b8f76}\label{state__machine_8cpp_a5734a27c6f335279bf9b0b57ae9b8f76}} 
bool {\bfseries result} = false
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
User interface server and F\+SM. 

\begin{DoxyAuthor}{Author}
Carmine Recchiuto, Roberta Reho 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
1.\+0 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
06/04/2022
\end{DoxyDate}
Service\+Server\+:~\newline
 /user\+\_\+interface (rt2\+\_\+assignment1\+::\+Command)

Service\+Client\+:~\newline
 /position\+\_\+server (rt2\+\_\+assignment1\+::\+Random\+Position)

Action\+Client\+:~\newline
 /reaching\+\_\+goal (rt2\+\_\+assignment1\+::\+P\+Lanning\+Action)

Description\+:

This node communicates with the user interface. If the \char`\"{}start\char`\"{} command is issued it calls for a random position to send to the /reaching\+\_\+goal node. In the same way it can cancel a running goal if a request for \char`\"{}stop\char`\"{} is received from the user\+\_\+interface. 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{state__machine_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}\label{state__machine_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}} 
\index{state\_machine.cpp@{state\_machine.cpp}!main@{main}}
\index{main@{main}!state\_machine.cpp@{state\_machine.cpp}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily int main (\begin{DoxyParamCaption}\item[{int}]{argc,  }\item[{char $\ast$$\ast$}]{argv }\end{DoxyParamCaption})}

Limits for the random position request

if the commandto start has been received from the UI

call for a random position

set the goal of the action

raise the goal running flag

if the goal is running call for the result message

if the returned value is true then the goal has been reached

if the cancel flag is up then the goal needs to be canceled\mbox{\Hypertarget{state__machine_8cpp_a1a9543636935547580c0657f4c7c0c2b}\label{state__machine_8cpp_a1a9543636935547580c0657f4c7c0c2b}} 
\index{state\_machine.cpp@{state\_machine.cpp}!user\_interface@{user\_interface}}
\index{user\_interface@{user\_interface}!state\_machine.cpp@{state\_machine.cpp}}
\doxysubsubsection{\texorpdfstring{user\_interface()}{user\_interface()}}
{\footnotesize\ttfamily bool user\+\_\+interface (\begin{DoxyParamCaption}\item[{rt2\+\_\+assignment1\+::\+Command\+::\+Request \&}]{req,  }\item[{rt2\+\_\+assignment1\+::\+Command\+::\+Response \&}]{res }\end{DoxyParamCaption})}

Service callback setting the start/stop robot state


\begin{DoxyParams}{Parameters}
{\em req} & (rt2\+\_\+assignment1\+::\+Command\+::\+Request \&)\+: Service request, containing the command (string). \\
\hline
{\em res} & (rt2\+\_\+assignment1\+::\+Command\+::\+Response \&)\+: Service response, the value of the \textquotesingle{}start\textquotesingle{} state (bool). \\
\hline
\end{DoxyParams}
