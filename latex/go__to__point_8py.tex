\hypertarget{go__to__point_8py}{}\doxysection{scripts/go\+\_\+to\+\_\+point.py File Reference}
\label{go__to__point_8py}\index{scripts/go\_to\_point.py@{scripts/go\_to\_point.py}}


Node implementing the go\+\_\+to\+\_\+point behavior.  


\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \mbox{\hyperlink{go__to__point_8py_a36304a9f313b0579f7fc69fa01695524}{go\+\_\+to\+\_\+point.\+clbk\+\_\+odom}} (msg)
\item 
def \mbox{\hyperlink{go__to__point_8py_a31ee48e5cae36821049b572a96b7c8be}{go\+\_\+to\+\_\+point.\+change\+\_\+state}} (state)
\item 
def \mbox{\hyperlink{go__to__point_8py_ac688bb56fa84763ea2edefc30cae032a}{go\+\_\+to\+\_\+point.\+normalize\+\_\+angle}} (angle)
\item 
def \mbox{\hyperlink{go__to__point_8py_a9c3011a3065fcbefcc1c5ad8c9979669}{go\+\_\+to\+\_\+point.\+fix\+\_\+yaw}} (des\+\_\+pos)
\item 
def \mbox{\hyperlink{go__to__point_8py_ac8579665c0fbf665f734476554fac37d}{go\+\_\+to\+\_\+point.\+go\+\_\+straight\+\_\+ahead}} (des\+\_\+pos)
\item 
def \mbox{\hyperlink{go__to__point_8py_a4a406386ca62830c19c93949e923f7bd}{go\+\_\+to\+\_\+point.\+fix\+\_\+final\+\_\+yaw}} (des\+\_\+yaw)
\item 
def \mbox{\hyperlink{go__to__point_8py_ac2587220a4ac9c845bc9c5b0b45d5835}{go\+\_\+to\+\_\+point.\+done}} ()
\item 
def \mbox{\hyperlink{go__to__point_8py_ad80fa73a15e1a5576fea98b4958dcef4}{go\+\_\+to\+\_\+point.\+planning}} (goal)
\item 
\mbox{\Hypertarget{go__to__point_8py_ab92bd6db1ec323a4d795ed6cb40aebe1}\label{go__to__point_8py_ab92bd6db1ec323a4d795ed6cb40aebe1}} 
def {\bfseries go\+\_\+to\+\_\+point.\+main} ()
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{go__to__point_8py_a91dbaab25e6080f6b5dbf82cac6ce75c}\label{go__to__point_8py_a91dbaab25e6080f6b5dbf82cac6ce75c}} 
{\bfseries go\+\_\+to\+\_\+point.\+position\+\_\+} = Point()
\item 
\mbox{\Hypertarget{go__to__point_8py_acafa50d4a3b16d8605fa03a28b48e828}\label{go__to__point_8py_acafa50d4a3b16d8605fa03a28b48e828}} 
{\bfseries go\+\_\+to\+\_\+point.\+pose\+\_\+} = Pose()
\item 
\mbox{\Hypertarget{go__to__point_8py_ae444f19eb2019982432760ace036ce03}\label{go__to__point_8py_ae444f19eb2019982432760ace036ce03}} 
int {\bfseries go\+\_\+to\+\_\+point.\+yaw\+\_\+} = 0
\item 
\mbox{\Hypertarget{go__to__point_8py_a4f01e0b11f73a96100c3fe8507f7585c}\label{go__to__point_8py_a4f01e0b11f73a96100c3fe8507f7585c}} 
int {\bfseries go\+\_\+to\+\_\+point.\+state\+\_\+} = 0
\item 
\mbox{\Hypertarget{go__to__point_8py_a57b4090d0abcbcf0bfa2bcb9329d3036}\label{go__to__point_8py_a57b4090d0abcbcf0bfa2bcb9329d3036}} 
{\bfseries go\+\_\+to\+\_\+point.\+pub\+\_\+} = None
\item 
\mbox{\Hypertarget{go__to__point_8py_a03b48b610dbd224a38eb226c1b2ba23d}\label{go__to__point_8py_a03b48b610dbd224a38eb226c1b2ba23d}} 
{\bfseries go\+\_\+to\+\_\+point.\+desired\+\_\+position\+\_\+} = Point()
\item 
\mbox{\Hypertarget{go__to__point_8py_a67f95834f0959feb3facd17bc7fa2b38}\label{go__to__point_8py_a67f95834f0959feb3facd17bc7fa2b38}} 
int {\bfseries go\+\_\+to\+\_\+point.\+yaw\+\_\+precision\+\_\+} = math.\+pi / 9
\item 
\mbox{\Hypertarget{go__to__point_8py_af74ccf49164d0478ca8343e2031d5813}\label{go__to__point_8py_af74ccf49164d0478ca8343e2031d5813}} 
int {\bfseries go\+\_\+to\+\_\+point.\+yaw\+\_\+precision\+\_\+2\+\_\+} = math.\+pi / 90
\item 
\mbox{\Hypertarget{go__to__point_8py_a6a1e4eb20ebd4fce0fc56b0ebfd7a8d5}\label{go__to__point_8py_a6a1e4eb20ebd4fce0fc56b0ebfd7a8d5}} 
float {\bfseries go\+\_\+to\+\_\+point.\+dist\+\_\+precision\+\_\+} = 0.\+1
\item 
\mbox{\Hypertarget{go__to__point_8py_a524106fc7667a0927951dfd89d52d6a7}\label{go__to__point_8py_a524106fc7667a0927951dfd89d52d6a7}} 
float {\bfseries go\+\_\+to\+\_\+point.\+kp\+\_\+a} = -\/3.\+0
\item 
\mbox{\Hypertarget{go__to__point_8py_a7bc498652ca66932e704e738b50c297b}\label{go__to__point_8py_a7bc498652ca66932e704e738b50c297b}} 
float {\bfseries go\+\_\+to\+\_\+point.\+kp\+\_\+d} = 0.\+2
\item 
\mbox{\Hypertarget{go__to__point_8py_acb4e14986fafe5cb73bb8ad0c178869d}\label{go__to__point_8py_acb4e14986fafe5cb73bb8ad0c178869d}} 
float {\bfseries go\+\_\+to\+\_\+point.\+ub\+\_\+a} = 0.\+6
\item 
\mbox{\Hypertarget{go__to__point_8py_afecad4058844db05d8321199e25b4498}\label{go__to__point_8py_afecad4058844db05d8321199e25b4498}} 
float {\bfseries go\+\_\+to\+\_\+point.\+lb\+\_\+a} = -\/0.\+5
\item 
\mbox{\Hypertarget{go__to__point_8py_a16c473b9e717200c483d18e66b48152a}\label{go__to__point_8py_a16c473b9e717200c483d18e66b48152a}} 
float {\bfseries go\+\_\+to\+\_\+point.\+ub\+\_\+d} = 0.\+6
\item 
\mbox{\Hypertarget{go__to__point_8py_a64583fad586a7212c40613ec1c3e7c69}\label{go__to__point_8py_a64583fad586a7212c40613ec1c3e7c69}} 
{\bfseries go\+\_\+to\+\_\+point.\+act\+\_\+s} = None
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Node implementing the go\+\_\+to\+\_\+point behavior. 

\begin{DoxyAuthor}{Author}
Carmine Recchiuto, Roberta Reho 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
0.\+1 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
06/04/2022
\end{DoxyDate}
Publishes to\+:~\newline
 /cmd\+\_\+vel (geometry\+\_\+msgs.\+msg.\+Twist)

Service\+Server\+:~\newline
 /odom (nav\+\_\+msgs.\+msg.\+Odom)

Action\+Server\+:~\newline
 /go\+\_\+to\+\_\+point (rt2\+\_\+assignment1.\+msg.\+Planning\+Action)

Description\+:

This node controls the go\+\_\+to\+\_\+point behavior of the robot using an action server. Whenever a goal is received, a state machine handles the behaviour\+: ~\newline



\begin{DoxyEnumerate}
\item align with the goal position ~\newline

\item go straight to the goal position ~\newline

\item align with the goal orientation ~\newline

\item goal pose reached ~\newline
 
\end{DoxyEnumerate}

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{go__to__point_8py_a31ee48e5cae36821049b572a96b7c8be}\label{go__to__point_8py_a31ee48e5cae36821049b572a96b7c8be}} 
\index{go\_to\_point.py@{go\_to\_point.py}!change\_state@{change\_state}}
\index{change\_state@{change\_state}!go\_to\_point.py@{go\_to\_point.py}}
\doxysubsubsection{\texorpdfstring{change\_state()}{change\_state()}}
{\footnotesize\ttfamily def go\+\_\+to\+\_\+point.\+change\+\_\+state (\begin{DoxyParamCaption}\item[{}]{state }\end{DoxyParamCaption})}

\begin{DoxyVerb}Updates the current global state

Args:
  state (int):  new state
\end{DoxyVerb}
 \mbox{\Hypertarget{go__to__point_8py_a36304a9f313b0579f7fc69fa01695524}\label{go__to__point_8py_a36304a9f313b0579f7fc69fa01695524}} 
\index{go\_to\_point.py@{go\_to\_point.py}!clbk\_odom@{clbk\_odom}}
\index{clbk\_odom@{clbk\_odom}!go\_to\_point.py@{go\_to\_point.py}}
\doxysubsubsection{\texorpdfstring{clbk\_odom()}{clbk\_odom()}}
{\footnotesize\ttfamily def go\+\_\+to\+\_\+point.\+clbk\+\_\+odom (\begin{DoxyParamCaption}\item[{}]{msg }\end{DoxyParamCaption})}

\begin{DoxyVerb}Odometry callback

Retrieves the position and orientation quaternion 
from the Odom message.

Args:
  msg (Odometry): odometry message.
\end{DoxyVerb}
 \mbox{\Hypertarget{go__to__point_8py_ac2587220a4ac9c845bc9c5b0b45d5835}\label{go__to__point_8py_ac2587220a4ac9c845bc9c5b0b45d5835}} 
\index{go\_to\_point.py@{go\_to\_point.py}!done@{done}}
\index{done@{done}!go\_to\_point.py@{go\_to\_point.py}}
\doxysubsubsection{\texorpdfstring{done()}{done()}}
{\footnotesize\ttfamily def go\+\_\+to\+\_\+point.\+done (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\begin{DoxyVerb}Stops the robot

Sets the robot linear and angular 
velocity to 0.0
\end{DoxyVerb}
 \mbox{\Hypertarget{go__to__point_8py_a4a406386ca62830c19c93949e923f7bd}\label{go__to__point_8py_a4a406386ca62830c19c93949e923f7bd}} 
\index{go\_to\_point.py@{go\_to\_point.py}!fix\_final\_yaw@{fix\_final\_yaw}}
\index{fix\_final\_yaw@{fix\_final\_yaw}!go\_to\_point.py@{go\_to\_point.py}}
\doxysubsubsection{\texorpdfstring{fix\_final\_yaw()}{fix\_final\_yaw()}}
{\footnotesize\ttfamily def go\+\_\+to\+\_\+point.\+fix\+\_\+final\+\_\+yaw (\begin{DoxyParamCaption}\item[{}]{des\+\_\+yaw }\end{DoxyParamCaption})}

\begin{DoxyVerb}Orients the robot towards the desired orientation

The function is used to orient
the robot to achieve the goal orientation. 
It changes to a new state, depending on the current
one.

Args:
  des_yaw (float):  desired yaw
  next_state (int): next state to set
\end{DoxyVerb}
 \mbox{\Hypertarget{go__to__point_8py_a9c3011a3065fcbefcc1c5ad8c9979669}\label{go__to__point_8py_a9c3011a3065fcbefcc1c5ad8c9979669}} 
\index{go\_to\_point.py@{go\_to\_point.py}!fix\_yaw@{fix\_yaw}}
\index{fix\_yaw@{fix\_yaw}!go\_to\_point.py@{go\_to\_point.py}}
\doxysubsubsection{\texorpdfstring{fix\_yaw()}{fix\_yaw()}}
{\footnotesize\ttfamily def go\+\_\+to\+\_\+point.\+fix\+\_\+yaw (\begin{DoxyParamCaption}\item[{}]{des\+\_\+pos }\end{DoxyParamCaption})}

\begin{DoxyVerb}Orients the robot towards the desired orientation

The function is used to orient
the robot toward the goal (x,y) position. 
It changes to a new state, depending on the current
one.

Args:
  des_yaw (float):  desired yaw
  next_state (int): next state to set
\end{DoxyVerb}
 \mbox{\Hypertarget{go__to__point_8py_ac8579665c0fbf665f734476554fac37d}\label{go__to__point_8py_ac8579665c0fbf665f734476554fac37d}} 
\index{go\_to\_point.py@{go\_to\_point.py}!go\_straight\_ahead@{go\_straight\_ahead}}
\index{go\_straight\_ahead@{go\_straight\_ahead}!go\_to\_point.py@{go\_to\_point.py}}
\doxysubsubsection{\texorpdfstring{go\_straight\_ahead()}{go\_straight\_ahead()}}
{\footnotesize\ttfamily def go\+\_\+to\+\_\+point.\+go\+\_\+straight\+\_\+ahead (\begin{DoxyParamCaption}\item[{}]{des\+\_\+pos }\end{DoxyParamCaption})}

\begin{DoxyVerb}Goes straight towards the goal

Set the linear and angular speed
according to the distance to the goal pose.

Args:
  des_pos (Point):  desired (x, y) position
\end{DoxyVerb}
 \mbox{\Hypertarget{go__to__point_8py_ac688bb56fa84763ea2edefc30cae032a}\label{go__to__point_8py_ac688bb56fa84763ea2edefc30cae032a}} 
\index{go\_to\_point.py@{go\_to\_point.py}!normalize\_angle@{normalize\_angle}}
\index{normalize\_angle@{normalize\_angle}!go\_to\_point.py@{go\_to\_point.py}}
\doxysubsubsection{\texorpdfstring{normalize\_angle()}{normalize\_angle()}}
{\footnotesize\ttfamily def go\+\_\+to\+\_\+point.\+normalize\+\_\+angle (\begin{DoxyParamCaption}\item[{}]{angle }\end{DoxyParamCaption})}

\begin{DoxyVerb}Normalizes an angle berween [-pi, pi]

Args:
  angle (float):  input angle
  
Returns:
  angle (float):  normalized angle
\end{DoxyVerb}
 \mbox{\Hypertarget{go__to__point_8py_ad80fa73a15e1a5576fea98b4958dcef4}\label{go__to__point_8py_ad80fa73a15e1a5576fea98b4958dcef4}} 
\index{go\_to\_point.py@{go\_to\_point.py}!planning@{planning}}
\index{planning@{planning}!go\_to\_point.py@{go\_to\_point.py}}
\doxysubsubsection{\texorpdfstring{planning()}{planning()}}
{\footnotesize\ttfamily def go\+\_\+to\+\_\+point.\+planning (\begin{DoxyParamCaption}\item[{}]{goal }\end{DoxyParamCaption})}

\begin{DoxyVerb}State machine 

Sets an appropriate behaviour depending
on the current robot state, in order
to reach the goal.
The state machine keeps running until
the goal is reached or the action is
preempted (the goal gets cancelled).

Args:
  goal (PoseActionGoal): (x,y,theta) goal pose
\end{DoxyVerb}
 